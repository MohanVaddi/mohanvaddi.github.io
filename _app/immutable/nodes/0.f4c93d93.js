import{C as At,D as Ct,S as be,i as ye,s as _e,k as d,a as P,q as ae,l as _,m as h,h as C,c as S,r as ge,n as u,E as we,F as Ee,b as j,G as f,H as ee,v as je,d as k,I as Se,f as Te,g as v,u as Pe,J as It,K as ut,L as ft,M as dt,N as K,e as Ne,O as $,P as Q,Q as q,R as _t,o as pt,y as te,z as se,A as ie,B as ne,T as J,U as Me,V as Ue,W as de,w as mt}from"../chunks/index.df47aeff.js";import{I as Be}from"../chunks/Icon.e6871eca.js";const ht=!0;async function vt({data:l}){return{server:l}}const Xs=Object.freeze(Object.defineProperty({__proto__:null,load:vt,prerender:ht},Symbol.toStringTag,{value:"Module"}));const ke={ERROR:"ERROR",IDLE:"IDLE",INIT:"INIT",READY:"READY",RUNNING:"RUNNING",UNSUPPORTED:"UNSUPPORTED"};function kt(){return new Promise((l,e)=>{if(document.getElementById("spotify-player"))l();else{const t=document.createElement("script");t.id="spotify-player",t.type="text/javascript",t.async=!1,t.defer=!0,t.src="https://sdk.scdn.co/spotify-player.js",t.onload=()=>l(),t.onerror=i=>e(new Error(`loadScript: ${i.message}`)),document.head.appendChild(t)}})}async function bt(l,e,n){return fetch("https://api.spotify.com/v1/me/player",{body:JSON.stringify({device_ids:[e],play:n}),headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},method:"PUT"})}function yt(l,e){const n=setInterval(l,e);At(()=>{clearInterval(n)})}function Ke(l){let e=Math.floor(l/6e4),n=Math.floor(l%6e4/1e3);return`${e}:${n.toString().padStart(2,"0")}`}const wt="data:image/png;base64,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aW9uIHJkZjphYm91dD0iIgogICAgeG1sbnM6aXB0Y0V4dD0iaHR0cDovL2lwdGMub3JnL3N0ZC9JcHRjNHhtcEV4dC8yMDA4LTAyLTI5LyIKICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgIHhtbG5zOnBsdXM9Imh0dHA6Ly9ucy51c2VwbHVzLm9yZy9sZGYveG1wLzEuMC8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOmMxNmFhZDYwLTI3OTQtNGEzMi04NTE4LThkNGI3MzcyMjBjZiIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5YTllM2Y0OC0wMTRlLTRlM2ItODRjOC1kNWU0ZDFjMjk3NjIiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4ODVmMWE5Zi1jNmZmLTQxNjctYjUwZC1iODdmYTA1ZjYwZjkiCiAgIEdJTVA6QVBJPSIyLjAiCiAgIEdJTVA6UGxhdGZvcm09IldpbmRvd3MiCiAgIEdJTVA6VGltZVN0YW1wPSIxNjI3MDQxNzk2NTEzOTE2IgogICBHSU1QOlZlcnNpb249IjIuMTAuMjIiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICB0aWZmOk9yaWVudGF0aW9uPSIxIgogICB4bXA6Q3JlYXRvclRvb2w9IkdJTVAgMi4xMCI+CiAgIDxpcHRjRXh0OkxvY2F0aW9uQ3JlYXRlZD4KICAgIDxyZGY6QmFnLz4KICAgPC9pcHRjRXh0OkxvY2F0aW9uQ3JlYXRlZD4KICAgPGlwdGNFeHQ6TG9jYXRpb25TaG93bj4KICAgIDxyZGY6QmFnLz4KICAgPC9pcHRjRXh0OkxvY2F0aW9uU2hvd24+CiAgIDxpcHRjRXh0OkFydHdvcmtPck9iamVjdD4KICAgIDxyZGY6QmFnLz4KICAgPC9pcHRjRXh0OkFydHdvcmtPck9iamVjdD4KICAgPGlwdGNFeHQ6UmVnaXN0cnlJZD4KICAgIDxyZGY6QmFnLz4KICAgPC9pcHRjRXh0OlJlZ2lzdHJ5SWQ+CiAgIDx4bXBNTTpIaXN0b3J5PgogICAgPHJkZjpTZXE+CiAgICAgPHJkZjpsaQogICAgICBzdEV2dDphY3Rpb249InNhdmVkIgogICAgICBzdEV2dDpjaGFuZ2VkPSIvIgogICAgICBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjZkYTIxYjI2LTlmMjUtNDQwOC05MmYyLWQ5MWY3YzFiMzM4YyIKICAgICAgc3RFdnQ6c29mdHdhcmVBZ2VudD0iR2ltcCAyLjEwIChXaW5kb3dzKSIKICAgICAgc3RFdnQ6d2hlbj0iMjAyMS0wNy0yM1QxNTowMzoxNiIvPgogICAgPC9yZGY6U2VxPgogICA8L3htcE1NOkhpc3Rvcnk+CiAgIDxwbHVzOkltYWdlU3VwcGxpZXI+CiAgICA8cmRmOlNlcS8+CiAgIDwvcGx1czpJbWFnZVN1cHBsaWVyPgogICA8cGx1czpJbWFnZUNyZWF0b3I+CiAgICA8cmRmOlNlcS8+CiAgIDwvcGx1czpJbWFnZUNyZWF0b3I+CiAgIDxwbHVzOkNvcHlyaWdodE93bmVyPgogICAgPHJkZjpTZXEvPgogICA8L3BsdXM6Q29weXJpZ2h0T3duZXI+CiAgIDxwbHVzOkxpY2Vuc29yPgogICAgPHJkZjpTZXEvPgogICA8L3BsdXM6TGljZW5zb3I+CiAgPC9yZGY6RGVzY3JpcHRpb24+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz6gpjv1AAAABmJLR0QAIwAjACPnTmdgAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH5QcXDAMQyjMpZAAAApZJREFUSMe9l0uIjlEYx3/PsGFCGdfcZrAYt1IslNwaWbAwaYgsKJnCypK9JRsLYmVDskDkfkkWUsPICMklJLeUXKbIfD+bM/X6vPN5+ebzr3fznvec//95zvN/znmDglBHA0uBeUATMCYNvQaeATeAyxHxjv6A2qKetzjOqkuqIZyiXvbfcUFt+lvSNvWr1eOL2lqUtN3+R3uRSGuFlVmuyO4pcBcYTG3wFZgVEc8A6jIDB2pIClAP7PslYrUFuFT24fXkzYfAPaAbeAx8T/OGJT/XA9OAWcCc5POoIGBxRFzrTXPWp5/VyVXYcKi6Sj2hlnL2+hRApI70JjP3QURMz1mwEWjIvgKeRsTHCiImAjuB9kwWBEairs9RtVvdoh5RH/yhWnvUTvWQulEdlyNgQ9mcNah7a2CdK+raDPGysvE9oZ4GVuRkqhu4BtwEHqWnBPQAA5IjJgNTgbnAQmBE2RpdwEVgNTAh8/4YakeO4vfqiH8orIXq/tQqK6Ej1I5kgyxeAs0R0a02p4jGpgjrUuRPgXdAJ9AVEWYEDAd2ANuAQTkab6Ge6kPVS/VtwT39pB5PLXdghaLqxdG6dIjnYTwwqmCWhwCtwDHghbpVjdRg8vAq1HXA4ZzB18Ah4E4qrPsR8a1sT5uBZmA+0AY0FhS6BnVUH+nYXkYyTp2TeWbkFNdi9WoB3zf0Tjjbxx4fVG+rP/pYpJRcsUudmRGwqQLxyazSJf3YOGarqyt8s6A8TResPc7kXQSaUqepr9F5/AWYGRHP8zpPa40iLanL//dlr6RuLtpzVxbot0Xw+Y+R5pA3qeeqKSR1UjV/FItSPy8VIOtRT/5mmRzEXwhoAFrSZW58OqkAngCv0sXwSkR8KLLeTxsMr359NpsNAAAAAElFTkSuQmCC";let fe={code_verifier:"cv",access_token:"at",refresh_token:"rt",expires_in:"ei"},$e={scopes:["user-read-playback-state","streaming","user-read-private","user-modify-playback-state","user-read-email"],state:Math.random().toString(36).replace(/[^a-z]+/g,"")};function Et(l){const n=new TextEncoder().encode(l);return window.crypto.subtle.digest("SHA-256",n)}function Rt(l){return btoa(String.fromCharCode.apply(null,new Uint8Array(l))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function Dt(l){return("0"+l.toString(16)).substr(-2)}async function jt(l){var e=await Et(l),n=Rt(e);return n}function Tt(l){var e=new Uint32Array(28);window.crypto.getRandomValues(e);let n=Array.from(e,Dt).join("");document.cookie=`${l}=${n};samesite=strict`}function Pt(){return window.location.search.substring(1).split("&").reduce((l,e)=>{if(e){var n=e.split("=");l[n[0]]=decodeURIComponent(n[1])}return l},{})}function Ye(l){let e=l+"=",t=decodeURIComponent(document.cookie).split(";");for(let i=0;i<t.length;i++){let s=t[i];for(;s.charAt(0)==" ";)s=s.substring(1);if(s.indexOf(e)==0)return s.substring(e.length,s.length)}return""}const He={auth:"https://accounts.spotify.com/authorize",token:"https://accounts.spotify.com/api/token"},Qe=async l=>{var e;const n=Ye(fe.code_verifier);if(!n)throw Error("Issues with PKCE code_verifier!");const t=await jt(n),i={client_id:l.client_id,response_type:"code",redirect_uri:l.redirect_uri||`${window.location.protocol}//${window.location.host}${window.location.pathname}`,code_challenge_method:"S256",code_challenge:t,state:l.state||$e.state,scope:((e=l.scopes)===null||e===void 0?void 0:e.join(" "))||$e.scopes.join(" ")},s=new URLSearchParams(i);return`${He.auth}?${s.toString()}`},St=async(l,e)=>{try{const n=Ye(fe.code_verifier);if(!n)throw Error("Issues with PKCE code_verifier!");const t={client_id:l.client_id,grant_type:"authorization_code",code:e,redirect_uri:l.redirect_uri||`${window.location.protocol}//${window.location.host}${window.location.pathname}`,code_verifier:n},i=await fetch(He.token,{body:new URLSearchParams(t),headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST"});if(i.status===200)return await i.json();console.log("[Auth] Invalid response while fetcing token!"),console.log("[Auth]",i.status,i.statusText,i)}catch(n){console.log("[Auth] Fatal error!",n)}},Vt=async(l,e)=>{const n={client_id:l.client_id,grant_type:"refresh_token",refresh_token:e},t=await fetch(He.token,{body:new URLSearchParams(n),headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST"});if(t.status===200)return await t.json();console.log("[Auth] Invalid response while refreshing token!"),console.log(t.status,t.statusText)},Nt=30;class zt{constructor(e,n,t){e||console.error("[Auth] Client ID is missing. Please provide an client_id!"),this.auth_obj={client_id:e,redirect_uri:n,scopes:t,state:void 0},this.state={isError:!1,error:"",isAuthorized:!1,token:null,refresh:null,code:null,expires_in:0}}init(e){const n=Pt();n!=null&&n.code?(this.state={...this.state,code:n.code},window.history.pushState({},null,window.location.origin),this.requestToken().then(()=>{e.bind(this)()})):!this.state.code&&!this.state.token&&!this.state.refresh&&(Tt(fe.code_verifier),e.bind(this)())}async login(){return new Promise(async(e,n)=>{const[t,i]=[Ye(fe.access_token),Ye(fe.refresh_token)];t&&i?(this.state={...this.state,refresh:i,token:t,isAuthorized:!0},e(this.state.isAuthorized)):i?(this.state={...this.state,refresh:i},await this.refreshToken(),e(this.state.isAuthorized)):(e(this.state.isAuthorized),window.location.href=await Qe(this.auth_obj))})}logout(){document.cookie=`${fe.access_token}=;expires=Thu, 01 Jan 1970 00:00:00 GMT`,document.cookie=`${fe.refresh_token}=;expires=Thu, 01 Jan 1970 00:00:00 GMT`,this.state={...this.state,token:null,refresh:null,isAuthorized:!1}}async getToken(){if(this.state.isAuthorized){if(this.state.token&&Ye(fe.access_token)===this.state.token)return this.state.token;if(this.state.refresh){if(await this.refreshToken(),this.state.isAuthorized&&this.state.token)return this.state.token}else console.warn("[Auth] Missing refersh_token. Out of sync.")}else window.location.href=await Qe(this.auth_obj)}async requestToken(){try{const e=await St(this.auth_obj,this.state.code);if(e)this.saveTokens(e);else throw new Error("Invalid response from token request!")}catch(e){console.error("[Auth] Issues while requesting token!",e.message),this.state={...this.state,isError:!0,error:"Issues while refreshing token!"}}}async refreshToken(){try{const e=await Vt(this.auth_obj,this.state.refresh);if(e)this.saveTokens(e);else throw new Error("Invalid response from token refresh!")}catch(e){console.error("[Auth] Issues while refreshing token!",e.message),this.state={...this.state,isError:!0,error:"Issues while refreshing token!"}}}saveTokens(e){document.cookie=`${fe.access_token}=${e.access_token};samesite=strict;max-age=${e.expires_in-60}`,document.cookie=`${fe.refresh_token}=${e.refresh_token};samesite=strict;max-age=${60*60*24*Nt}`,this.state={...this.state,isAuthorized:!0,token:e.access_token,refresh:e.refresh_token,expires_in:e.expires_in}}}function Lt(l){return l*l*l}function Ot(l){const e=l-1;return e*e*e+1}function qe(l,{delay:e=0,duration:n=400,easing:t=Ct}={}){const i=+getComputedStyle(l).opacity;return{delay:e,duration:n,easing:t,css:s=>`opacity: ${s*i}`}}function xe(l){let e,n,t,i,s;return{c(){e=d("img"),this.h()},l(o){e=_(o,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ee(e.src,n=l[4])||u(e,"src",n),u(e,"alt","album cover"),u(e,"class","svelte-f31sgv")},m(o,a){j(o,e,a),s=!0},p(o,a){l=o,(!s||a&16&&!Ee(e.src,n=l[4]))&&u(e,"src",n)},i(o){s||(ut(()=>{s&&(i&&i.end(1),t=ft(e,qe,{easing:Lt,duration:1e3}),t.start())}),s=!0)},o(o){t&&t.invalidate(),i=dt(e,qe,{easing:Ot,duration:2e3}),s=!1},d(o){o&&C(e),o&&i&&i.end()}}}function Gt(l){let e,n,t,i=l[4],s,o,a,A,g,r,c,I,y,D,L,Z,W,ce,pe,V,N,B,le=l[1].track_window.current_track.name+"",oe,Ce,x,O,H=l[1].track_window.current_track.artists.map(et).join(", ")+"",p,Y,R,w,E,G,M,X,re,T=Ke(l[1].duration)+"",U,z,Ve,ue,F=xe(l);return{c(){e=d("div"),n=d("div"),t=d("div"),F.c(),s=P(),o=d("div"),a=d("div"),A=P(),g=d("div"),r=d("div"),c=d("div"),I=d("div"),y=P(),D=d("div"),L=P(),Z=d("div"),W=d("img"),pe=P(),V=d("div"),N=d("div"),B=d("b"),oe=ae(le),Ce=P(),x=d("div"),O=d("small"),p=ae(H),Y=P(),R=d("div"),w=d("div"),E=d("div"),M=P(),X=d("div"),re=d("small"),U=ae(T),this.h()},l(m){e=_(m,"DIV",{class:!0});var b=h(e);n=_(b,"DIV",{class:!0});var Ae=h(n);t=_(Ae,"DIV",{class:!0});var ze=h(t);F.l(ze),ze.forEach(C),s=S(Ae),o=_(Ae,"DIV",{class:!0});var me=h(o);a=_(me,"DIV",{class:!0}),h(a).forEach(C),me.forEach(C),Ae.forEach(C),A=S(b),g=_(b,"DIV",{class:!0});var Le=h(g);r=_(Le,"DIV",{class:!0});var Ie=h(r);c=_(Ie,"DIV",{class:!0});var he=h(c);I=_(he,"DIV",{class:!0}),h(I).forEach(C),y=S(he),D=_(he,"DIV",{class:!0}),h(D).forEach(C),L=S(he),Z=_(he,"DIV",{class:!0});var Oe=h(Z);W=_(Oe,"IMG",{src:!0,alt:!0,class:!0}),Oe.forEach(C),he.forEach(C),pe=S(Ie),V=_(Ie,"DIV",{class:!0});var Re=h(V);N=_(Re,"DIV",{class:!0});var Ge=h(N);B=_(Ge,"B",{});var ve=h(B);oe=ge(ve,le),ve.forEach(C),Ge.forEach(C),Ce=S(Re),x=_(Re,"DIV",{class:!0});var Ze=h(x);O=_(Ze,"SMALL",{});var We=h(O);p=ge(We,H),We.forEach(C),Ze.forEach(C),Re.forEach(C),Y=S(Ie),R=_(Ie,"DIV",{class:!0});var De=h(R);w=_(De,"DIV",{class:!0});var Xe=h(w);E=_(Xe,"DIV",{class:!0,style:!0}),h(E).forEach(C),Xe.forEach(C),M=S(De),X=_(De,"DIV",{});var Fe=h(X);re=_(Fe,"SMALL",{});var Je=h(re);U=ge(Je,T),Je.forEach(C),Fe.forEach(C),De.forEach(C),Ie.forEach(C),Le.forEach(C),b.forEach(C),this.h()},h(){u(t,"class","album-image svelte-f31sgv"),u(a,"class","button svelte-f31sgv"),we(a,"pause",!l[1].paused),u(o,"class","play-pause svelte-f31sgv"),we(o,"hidden",!l[2]),u(n,"class","left-slot svelte-f31sgv"),u(I,"class","prev svelte-f31sgv"),we(I,"hidden",!l[2]),u(D,"class","next svelte-f31sgv"),we(D,"hidden",!l[2]),Ee(W.src,ce=wt)||u(W,"src",ce),u(W,"alt","spotify logo"),u(W,"class","svelte-f31sgv"),u(Z,"class","logo svelte-f31sgv"),u(c,"class","top svelte-f31sgv"),u(N,"class","name"),u(x,"class","artists"),u(V,"class","middle svelte-f31sgv"),u(E,"class","progress svelte-f31sgv"),u(E,"style",G=`width: ${l[3]/l[1].duration*100}%;`),u(w,"class","progress-bar svelte-f31sgv"),u(R,"class","bottom svelte-f31sgv"),u(r,"class","track-info svelte-f31sgv"),u(g,"class","right-slot svelte-f31sgv"),u(e,"class","basic-player svelte-f31sgv")},m(m,b){j(m,e,b),f(e,n),f(n,t),F.m(t,null),f(n,s),f(n,o),f(o,a),f(e,A),f(e,g),f(g,r),f(r,c),f(c,I),f(c,y),f(c,D),f(c,L),f(c,Z),f(Z,W),f(r,pe),f(r,V),f(V,N),f(N,B),f(B,oe),f(V,Ce),f(V,x),f(x,O),f(O,p),f(r,Y),f(r,R),f(R,w),f(w,E),f(R,M),f(R,X),f(X,re),f(re,U),z=!0,Ve||(ue=[ee(o,"click",l[7]),ee(I,"click",l[8]),ee(D,"click",l[9]),ee(e,"mouseenter",l[10]),ee(e,"mouseleave",l[11])],Ve=!0)},p(m,[b]){b&16&&_e(i,i=m[4])?(je(),k(F,1,1,Se),Te(),F=xe(m),F.c(),v(F,1),F.m(t,null)):F.p(m,b),(!z||b&2)&&we(a,"pause",!m[1].paused),(!z||b&4)&&we(o,"hidden",!m[2]),(!z||b&4)&&we(I,"hidden",!m[2]),(!z||b&4)&&we(D,"hidden",!m[2]),(!z||b&2)&&le!==(le=m[1].track_window.current_track.name+"")&&Pe(oe,le),(!z||b&2)&&H!==(H=m[1].track_window.current_track.artists.map(et).join(", ")+"")&&Pe(p,H),(!z||b&10&&G!==(G=`width: ${m[3]/m[1].duration*100}%;`))&&u(E,"style",G),(!z||b&2)&&T!==(T=Ke(m[1].duration)+"")&&Pe(U,T)},i(m){z||(v(F),z=!0)},o(m){k(F),z=!1},d(m){m&&C(e),F.d(m),Ve=!1,It(ue)}}}const et=l=>l.name;function Zt(l,e,n){let t,i;var s,o;let{player:a,state:A}=e,g=!1;yt(()=>n(3,i+=A.paused?0:300),300);const r=()=>a.togglePlay(),c=()=>a.previousTrack(),I=()=>a.nextTrack(),y=()=>n(2,g=!0),D=()=>n(2,g=!1);return l.$$set=L=>{"player"in L&&n(0,a=L.player),"state"in L&&n(1,A=L.state)},l.$$.update=()=>{l.$$.dirty&98&&n(4,t=n(6,o=n(5,s=A.track_window.current_track.album.images)===null||s===void 0?void 0:s.find(L=>L.width===64))===null||o===void 0?void 0:o.url),l.$$.dirty&2&&n(3,i=A.position)},[a,A,g,i,t,s,o,r,c,I,y,D]}class Wt extends be{constructor(e){super(),ye(this,e,Zt,Gt,_e,{player:0,state:1})}}const Yt=l=>({}),tt=l=>({}),Mt=l=>({}),st=l=>({}),Ut=l=>({player:l&8,state:l&16}),it=l=>({player:l[3],state:l[4]}),Bt=l=>({}),nt=l=>({}),Ht=l=>({error:l&4}),lt=l=>({error:{type:l[2].errorType,message:l[2].error}}),Xt=l=>({}),ot=l=>({}),Ft=l=>({player:l&8,state:l&16,error:l&4,internal:l&228}),rt=l=>({player:l[3],state:l[4],error:{type:l[2].errorType,message:l[2].error},internal:{...l[2],isAuthorized:l[5],isReady:l[7],isLoading:l[6]}});function at(l){let e,n,t,i;const s=[Kt,Jt],o=[];function a(A,g){return A[5]?0:1}return e=a(l),n=o[e]=s[e](l),{c(){n.c(),t=Ne()},l(A){n.l(A),t=Ne()},m(A,g){o[e].m(A,g),j(A,t,g),i=!0},p(A,g){let r=e;e=a(A),e===r?o[e].p(A,g):(je(),k(o[r],1,1,()=>{o[r]=null}),Te(),n=o[e],n?n.p(A,g):(n=o[e]=s[e](A),n.c()),v(n,1),n.m(t.parentNode,t))},i(A){i||(v(n),i=!0)},o(A){k(n),i=!1},d(A){o[e].d(A),A&&C(t)}}}function Jt(l){let e;const n=l[16].login,t=K(n,l,l[15],tt),i=t||$t(l);return{c(){i&&i.c()},l(s){i&&i.l(s)},m(s,o){i&&i.m(s,o),e=!0},p(s,o){t&&t.p&&(!e||o&32768)&&$(t,n,s,s[15],e?q(n,s[15],o,Yt):Q(s[15]),tt)},i(s){e||(v(i,s),e=!0)},o(s){k(i,s),e=!1},d(s){i&&i.d(s)}}}function Kt(l){let e,n,t,i,s,o;const a=[xt,qt,Qt],A=[];function g(I,y){return I[6]?0:I[2].error?1:I[2].isActive?-1:2}~(e=g(l))&&(n=A[e]=a[e](l));let r=l[7]&&l[2].isActive&&gt(l),c=!l[6]&&ct(l);return{c(){n&&n.c(),t=P(),r&&r.c(),i=P(),c&&c.c(),s=Ne()},l(I){n&&n.l(I),t=S(I),r&&r.l(I),i=S(I),c&&c.l(I),s=Ne()},m(I,y){~e&&A[e].m(I,y),j(I,t,y),r&&r.m(I,y),j(I,i,y),c&&c.m(I,y),j(I,s,y),o=!0},p(I,y){let D=e;e=g(I),e===D?~e&&A[e].p(I,y):(n&&(je(),k(A[D],1,1,()=>{A[D]=null}),Te()),~e?(n=A[e],n?n.p(I,y):(n=A[e]=a[e](I),n.c()),v(n,1),n.m(t.parentNode,t)):n=null),I[7]&&I[2].isActive?r?(r.p(I,y),y&132&&v(r,1)):(r=gt(I),r.c(),v(r,1),r.m(i.parentNode,i)):r&&(je(),k(r,1,1,()=>{r=null}),Te()),I[6]?c&&(je(),k(c,1,1,()=>{c=null}),Te()):c?(c.p(I,y),y&64&&v(c,1)):(c=ct(I),c.c(),v(c,1),c.m(s.parentNode,s))},i(I){o||(v(n),v(r),v(c),o=!0)},o(I){k(n),k(r),k(c),o=!1},d(I){~e&&A[e].d(I),I&&C(t),r&&r.d(I),I&&C(i),c&&c.d(I),I&&C(s)}}}function $t(l){let e,n,t,i;return{c(){e=d("button"),n=ae("Login")},l(s){e=_(s,"BUTTON",{});var o=h(e);n=ge(o,"Login"),o.forEach(C)},m(s,o){j(s,e,o),f(e,n),t||(i=ee(e,"click",l[18]),t=!0)},p:Se,d(s){s&&C(e),t=!1,i()}}}function Qt(l){let e;const n=l[16].waiting,t=K(n,l,l[15],nt),i=t||es(l);return{c(){i&&i.c()},l(s){i&&i.l(s)},m(s,o){i&&i.m(s,o),e=!0},p(s,o){t&&t.p&&(!e||o&32768)&&$(t,n,s,s[15],e?q(n,s[15],o,Bt):Q(s[15]),nt)},i(s){e||(v(i,s),e=!0)},o(s){k(i,s),e=!1},d(s){i&&i.d(s)}}}function qt(l){let e;const n=l[16].error,t=K(n,l,l[15],lt),i=t||ts(l);return{c(){i&&i.c()},l(s){i&&i.l(s)},m(s,o){i&&i.m(s,o),e=!0},p(s,o){t?t.p&&(!e||o&32772)&&$(t,n,s,s[15],e?q(n,s[15],o,Ht):Q(s[15]),lt):i&&i.p&&(!e||o&4)&&i.p(s,e?o:-1)},i(s){e||(v(i,s),e=!0)},o(s){k(i,s),e=!1},d(s){i&&i.d(s)}}}function xt(l){let e;const n=l[16].loading,t=K(n,l,l[15],ot),i=t||ss();return{c(){i&&i.c()},l(s){i&&i.l(s)},m(s,o){i&&i.m(s,o),e=!0},p(s,o){t&&t.p&&(!e||o&32768)&&$(t,n,s,s[15],e?q(n,s[15],o,Xt):Q(s[15]),ot)},i(s){e||(v(i,s),e=!0)},o(s){k(i,s),e=!1},d(s){i&&i.d(s)}}}function es(l){let e,n,t,i;return{c(){e=d("button"),n=ae("Select this device")},l(s){e=_(s,"BUTTON",{});var o=h(e);n=ge(o,"Select this device"),o.forEach(C)},m(s,o){j(s,e,o),f(e,n),t||(i=ee(e,"click",l[17]),t=!0)},p:Se,d(s){s&&C(e),t=!1,i()}}}function ts(l){let e=l[2].errorType+"",n,t,i=l[2].error+"",s;return{c(){n=ae(e),t=ae(": "),s=ae(i)},l(o){n=ge(o,e),t=ge(o,": "),s=ge(o,i)},m(o,a){j(o,n,a),j(o,t,a),j(o,s,a)},p(o,a){a&4&&e!==(e=o[2].errorType+"")&&Pe(n,e),a&4&&i!==(i=o[2].error+"")&&Pe(s,i)},d(o){o&&C(n),o&&C(t),o&&C(s)}}}function ss(l){let e;return{c(){e=ae("Loading...")},l(n){e=ge(n,"Loading...")},m(n,t){j(n,e,t)},d(n){n&&C(e)}}}function gt(l){let e;const n=l[16].player,t=K(n,l,l[15],it),i=t||is(l);return{c(){i&&i.c()},l(s){i&&i.l(s)},m(s,o){i&&i.m(s,o),e=!0},p(s,o){t?t.p&&(!e||o&32792)&&$(t,n,s,s[15],e?q(n,s[15],o,Ut):Q(s[15]),it):i&&i.p&&(!e||o&24)&&i.p(s,e?o:-1)},i(s){e||(v(i,s),e=!0)},o(s){k(i,s),e=!1},d(s){i&&i.d(s)}}}function is(l){let e,n;return e=new Wt({props:{player:l[3],state:l[4]}}),{c(){te(e.$$.fragment)},l(t){se(e.$$.fragment,t)},m(t,i){ie(e,t,i),n=!0},p(t,i){const s={};i&8&&(s.player=t[3]),i&16&&(s.state=t[4]),e.$set(s)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){k(e.$$.fragment,t),n=!1},d(t){ne(e,t)}}}function ct(l){let e;const n=l[16].logout,t=K(n,l,l[15],st);return{c(){t&&t.c()},l(i){t&&t.l(i)},m(i,s){t&&t.m(i,s),e=!0},p(i,s){t&&t.p&&(!e||s&32768)&&$(t,n,i,i[15],e?q(n,i[15],s,Mt):Q(i[15]),st)},i(i){e||(v(t,i),e=!0)},o(i){k(t,i),e=!1},d(i){t&&t.d(i)}}}function ns(l){let e,n,t,i;const s=l[16].all,o=K(s,l,l[15],rt),a=l[16].default,A=K(a,l,l[15],null);let g=!l[8].all&&at(l);return{c(){o&&o.c(),e=P(),A&&A.c(),n=P(),g&&g.c(),t=Ne()},l(r){o&&o.l(r),e=S(r),A&&A.l(r),n=S(r),g&&g.l(r),t=Ne()},m(r,c){o&&o.m(r,c),j(r,e,c),A&&A.m(r,c),j(r,n,c),g&&g.m(r,c),j(r,t,c),i=!0},p(r,[c]){o&&o.p&&(!i||c&33020)&&$(o,s,r,r[15],i?q(s,r[15],c,Ft):Q(r[15]),rt),A&&A.p&&(!i||c&32768)&&$(A,a,r,r[15],i?q(a,r[15],c,null):Q(r[15]),null),r[8].all?g&&(je(),k(g,1,1,()=>{g=null}),Te()):g?(g.p(r,c),c&256&&v(g,1)):(g=at(r),g.c(),v(g,1),g.m(t.parentNode,t))},i(r){i||(v(o,r),v(A,r),v(g),i=!0)},o(r){k(o,r),k(A,r),k(g),i=!1},d(r){o&&o.d(r),r&&C(e),A&&A.d(r),r&&C(n),g&&g.d(r),r&&C(t)}}}function ls(l,e,n){let t,i,s,o,{$$slots:a={},$$scope:A}=e;const g=_t(a);var r=this&&this.__awaiter||function(p,Y,R,w){function E(G){return G instanceof R?G:new R(function(M){M(G)})}return new(R||(R=Promise))(function(G,M){function X(U){try{T(w.next(U))}catch(z){M(z)}}function re(U){try{T(w.throw(U))}catch(z){M(z)}}function T(U){U.done?G(U.value):E(U.value).then(X,re)}T((w=w.apply(p,Y||[])).next())})};let c,I,y,{client_id:D}=e,{redirect_uri:L=null}=e,{scopes:Z=null}=e,{name:W="Svelte Web Player"}=e,{volume:ce=.5}=e,pe={deviceId:"",error:"",errorType:"",isActive:!1,isInitializing:!1,isPlaying:!1,isUnsupported:!1,status:ke.IDLE,accessToken:""};const V=()=>{n(2,t=Object.assign(Object.assign({},t),{isInitializing:!0})),n(3,I=new window.Spotify.Player({getOAuthToken:p=>r(void 0,void 0,void 0,function*(){let Y=yield c.getToken();n(2,t=Object.assign(Object.assign({},t),{accessToken:Y})),p(Y)}),name:W,volume:ce})),I.addListener("ready",N),I.addListener("not_ready",N),I.addListener("player_state_changed",B),I.addListener("initialization_error",p=>{le("initialization_error",p.message)}),I.addListener("authentication_error",p=>{le("authentication_error",p.message)}),I.addListener("playback_error",p=>{le("playback_error",p.message)}),I.connect()},N=({device_id:p})=>r(void 0,void 0,void 0,function*(){n(2,t=Object.assign(Object.assign({},t),{deviceId:p,isInitializing:!1,status:p?ke.READY:ke.IDLE}))}),B=p=>r(void 0,void 0,void 0,function*(){try{n(4,y=p),p?n(2,t=Object.assign(Object.assign({},t),{error:"",errorType:"",isActive:!0})):n(2,t=Object.assign(Object.assign({},t),{isActive:!1,isPlaying:!1}))}catch(Y){console.log(Y)}}),le=(p,Y)=>r(void 0,void 0,void 0,function*(){const{status:R}=t,w=p==="playback_error",E=p==="initialization_error";let G=R;I&&!w&&(yield I.disconnect()),E&&(G=ke.UNSUPPORTED),!E&&!w&&(G=ke.ERROR),n(2,t=Object.assign(Object.assign({},t),{error:Y,errorType:p,isInitializing:!1,isUnsupported:E,status:G}))});pt(()=>r(void 0,void 0,void 0,function*(){if(n(2,t=Object.assign(Object.assign({},t),{status:ke.INIT})),!c){var p=new zt(D,L,Z);p.init(function(){c=p})}o?window.onSpotifyWebPlaybackSDKReady?V():window.onSpotifyWebPlaybackSDKReady=V:window.onSpotifyWebPlaybackSDKReady=()=>{},yield kt()})),At(()=>{I&&I.disconnect()});function oe(){c&&c.login().then(p=>{p&&(n(5,o=!0),V())})}function Ce(){c&&(c.logout(),n(5,o=!1))}function x(){if(!t.deviceId){console.log("[Player] No device found");return}bt(t.accessToken,t.deviceId)}const O=()=>x(),H=()=>oe();return l.$$set=p=>{"client_id"in p&&n(9,D=p.client_id),"redirect_uri"in p&&n(10,L=p.redirect_uri),"scopes"in p&&n(11,Z=p.scopes),"name"in p&&n(12,W=p.name),"volume"in p&&n(13,ce=p.volume),"$$scope"in p&&n(15,A=p.$$scope)},l.$$.update=()=>{l.$$.dirty&4&&n(7,i=[ke.READY,ke.UNSUPPORTED].indexOf(t.status)>=0),l.$$.dirty&4&&n(6,s=[ke.INIT].indexOf(t.status)>=0)},n(2,t=pe),n(5,o=!1),[oe,x,t,I,y,o,s,i,g,D,L,Z,W,ce,Ce,A,a,O,H]}class os extends be{constructor(e){super(),ye(this,e,ls,ns,_e,{client_id:9,redirect_uri:10,scopes:11,name:12,volume:13,login:0,logout:14,selectDevice:1})}get login(){return this.$$.ctx[0]}get logout(){return this.$$.ctx[14]}get selectDevice(){return this.$$.ctx[1]}}function rs(l){let e;const n=l[2].default,t=K(n,l,l[3],null);return{c(){t&&t.c()},l(i){t&&t.l(i)},m(i,s){t&&t.m(i,s),e=!0},p(i,s){t&&t.p&&(!e||s&8)&&$(t,n,i,i[3],e?q(n,i[3],s,null):Q(i[3]),null)},i(i){e||(v(t,i),e=!0)},o(i){k(t,i),e=!1},d(i){t&&t.d(i)}}}function as(l){let e,n;const t=[{name:"pause"},l[1],{iconNode:l[0]}];let i={$$slots:{default:[rs]},$$scope:{ctx:l}};for(let s=0;s<t.length;s+=1)i=J(i,t[s]);return e=new Be({props:i}),{c(){te(e.$$.fragment)},l(s){se(e.$$.fragment,s)},m(s,o){ie(e,s,o),n=!0},p(s,[o]){const a=o&3?Me(t,[t[0],o&2&&Ue(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){k(e.$$.fragment,s),n=!1},d(s){ne(e,s)}}}function gs(l,e,n){let{$$slots:t={},$$scope:i}=e;const s=[["rect",{width:"4",height:"16",x:"6",y:"4"}],["rect",{width:"4",height:"16",x:"14",y:"4"}]];return l.$$set=o=>{n(1,e=J(J({},e),de(o))),"$$scope"in o&&n(3,i=o.$$scope)},e=de(e),[s,e,t,i]}class cs extends be{constructor(e){super(),ye(this,e,gs,as,_e,{})}}const As=cs;function Is(l){let e;const n=l[2].default,t=K(n,l,l[3],null);return{c(){t&&t.c()},l(i){t&&t.l(i)},m(i,s){t&&t.m(i,s),e=!0},p(i,s){t&&t.p&&(!e||s&8)&&$(t,n,i,i[3],e?q(n,i[3],s,null):Q(i[3]),null)},i(i){e||(v(t,i),e=!0)},o(i){k(t,i),e=!1},d(i){t&&t.d(i)}}}function Cs(l){let e,n;const t=[{name:"play"},l[1],{iconNode:l[0]}];let i={$$slots:{default:[Is]},$$scope:{ctx:l}};for(let s=0;s<t.length;s+=1)i=J(i,t[s]);return e=new Be({props:i}),{c(){te(e.$$.fragment)},l(s){se(e.$$.fragment,s)},m(s,o){ie(e,s,o),n=!0},p(s,[o]){const a=o&3?Me(t,[t[0],o&2&&Ue(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){k(e.$$.fragment,s),n=!1},d(s){ne(e,s)}}}function us(l,e,n){let{$$slots:t={},$$scope:i}=e;const s=[["polygon",{points:"5 3 19 12 5 21 5 3"}]];return l.$$set=o=>{n(1,e=J(J({},e),de(o))),"$$scope"in o&&n(3,i=o.$$scope)},e=de(e),[s,e,t,i]}class fs extends be{constructor(e){super(),ye(this,e,us,Cs,_e,{})}}const ds=fs;function _s(l){let e;const n=l[2].default,t=K(n,l,l[3],null);return{c(){t&&t.c()},l(i){t&&t.l(i)},m(i,s){t&&t.m(i,s),e=!0},p(i,s){t&&t.p&&(!e||s&8)&&$(t,n,i,i[3],e?q(n,i[3],s,null):Q(i[3]),null)},i(i){e||(v(t,i),e=!0)},o(i){k(t,i),e=!1},d(i){t&&t.d(i)}}}function ps(l){let e,n;const t=[{name:"skip-back"},l[1],{iconNode:l[0]}];let i={$$slots:{default:[_s]},$$scope:{ctx:l}};for(let s=0;s<t.length;s+=1)i=J(i,t[s]);return e=new Be({props:i}),{c(){te(e.$$.fragment)},l(s){se(e.$$.fragment,s)},m(s,o){ie(e,s,o),n=!0},p(s,[o]){const a=o&3?Me(t,[t[0],o&2&&Ue(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){k(e.$$.fragment,s),n=!1},d(s){ne(e,s)}}}function ms(l,e,n){let{$$slots:t={},$$scope:i}=e;const s=[["polygon",{points:"19 20 9 12 19 4 19 20"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5"}]];return l.$$set=o=>{n(1,e=J(J({},e),de(o))),"$$scope"in o&&n(3,i=o.$$scope)},e=de(e),[s,e,t,i]}class hs extends be{constructor(e){super(),ye(this,e,ms,ps,_e,{})}}const vs=hs;function ks(l){let e;const n=l[2].default,t=K(n,l,l[3],null);return{c(){t&&t.c()},l(i){t&&t.l(i)},m(i,s){t&&t.m(i,s),e=!0},p(i,s){t&&t.p&&(!e||s&8)&&$(t,n,i,i[3],e?q(n,i[3],s,null):Q(i[3]),null)},i(i){e||(v(t,i),e=!0)},o(i){k(t,i),e=!1},d(i){t&&t.d(i)}}}function bs(l){let e,n;const t=[{name:"skip-forward"},l[1],{iconNode:l[0]}];let i={$$slots:{default:[ks]},$$scope:{ctx:l}};for(let s=0;s<t.length;s+=1)i=J(i,t[s]);return e=new Be({props:i}),{c(){te(e.$$.fragment)},l(s){se(e.$$.fragment,s)},m(s,o){ie(e,s,o),n=!0},p(s,[o]){const a=o&3?Me(t,[t[0],o&2&&Ue(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){k(e.$$.fragment,s),n=!1},d(s){ne(e,s)}}}function ys(l,e,n){let{$$slots:t={},$$scope:i}=e;const s=[["polygon",{points:"5 4 15 12 5 20 5 4"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19"}]];return l.$$set=o=>{n(1,e=J(J({},e),de(o))),"$$scope"in o&&n(3,i=o.$$scope)},e=de(e),[s,e,t,i]}class ws extends be{constructor(e){super(),ye(this,e,ys,bs,_e,{})}}const Es=ws;function Rs(l){let e;const n=l[2].default,t=K(n,l,l[3],null);return{c(){t&&t.c()},l(i){t&&t.l(i)},m(i,s){t&&t.m(i,s),e=!0},p(i,s){t&&t.p&&(!e||s&8)&&$(t,n,i,i[3],e?q(n,i[3],s,null):Q(i[3]),null)},i(i){e||(v(t,i),e=!0)},o(i){k(t,i),e=!1},d(i){t&&t.d(i)}}}function Ds(l){let e,n;const t=[{name:"x"},l[1],{iconNode:l[0]}];let i={$$slots:{default:[Rs]},$$scope:{ctx:l}};for(let s=0;s<t.length;s+=1)i=J(i,t[s]);return e=new Be({props:i}),{c(){te(e.$$.fragment)},l(s){se(e.$$.fragment,s)},m(s,o){ie(e,s,o),n=!0},p(s,[o]){const a=o&3?Me(t,[t[0],o&2&&Ue(s[1]),o&1&&{iconNode:s[0]}]):{};o&8&&(a.$$scope={dirty:o,ctx:s}),e.$set(a)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){k(e.$$.fragment,s),n=!1},d(s){ne(e,s)}}}function js(l,e,n){let{$$slots:t={},$$scope:i}=e;const s=[["line",{x1:"18",x2:"6",y1:"6",y2:"18"}],["line",{x1:"6",x2:"18",y1:"6",y2:"18"}]];return l.$$set=o=>{n(1,e=J(J({},e),de(o))),"$$scope"in o&&n(3,i=o.$$scope)},e=de(e),[s,e,t,i]}class Ts extends be{constructor(e){super(),ye(this,e,js,Ds,_e,{})}}const Ps=Ts;function Ss(l){let e,n;return e=new As({props:{class:"inline playback-icon",size:18}}),{c(){te(e.$$.fragment)},l(t){se(e.$$.fragment,t)},m(t,i){ie(e,t,i),n=!0},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){k(e.$$.fragment,t),n=!1},d(t){ne(e,t)}}}function Vs(l){let e,n;return e=new ds({props:{class:"inline playback-icon",size:18}}),{c(){te(e.$$.fragment)},l(t){se(e.$$.fragment,t)},m(t,i){ie(e,t,i),n=!0},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){k(e.$$.fragment,t),n=!1},d(t){ne(e,t)}}}function Ns(l){let e,n,t,i,s,o,a,A,g,r,c,I,y=l[4].item.name+"",D,L,Z,W=l[4].item.artists[0].name+"",ce,pe,V,N,B,le,oe,Ce,x,O,H,p,Y,R,w,E,G,M,X,re,T,U,z;t=new Ps({props:{class:"inline playback-icon"}}),p=new vs({props:{class:"inline playback-icon",size:18}});const Ve=[Vs,Ss],ue=[];function F(m,b){return m[2].paused?0:1}return w=F(l),E=ue[w]=Ve[w](l),X=new Es({props:{class:"inline playback-icon",size:18}}),{c(){e=d("div"),n=d("div"),te(t.$$.fragment),i=P(),s=d("div"),o=d("div"),a=d("div"),A=d("img"),r=P(),c=d("div"),I=d("p"),D=ae(y),L=P(),Z=d("p"),ce=ae(W),pe=P(),V=d("div"),N=d("a"),B=d("img"),x=P(),O=d("div"),H=d("div"),te(p.$$.fragment),Y=P(),R=d("div"),E.c(),G=P(),M=d("div"),te(X.$$.fragment),this.h()},l(m){e=_(m,"DIV",{class:!0});var b=h(e);n=_(b,"DIV",{class:!0});var Ae=h(n);se(t.$$.fragment,Ae),Ae.forEach(C),i=S(b),s=_(b,"DIV",{class:!0,id:!0});var ze=h(s);o=_(ze,"DIV",{class:!0});var me=h(o);a=_(me,"DIV",{class:!0});var Le=h(a);A=_(Le,"IMG",{src:!0,class:!0,alt:!0}),Le.forEach(C),r=S(me),c=_(me,"DIV",{class:!0});var Ie=h(c);I=_(Ie,"P",{class:!0});var he=h(I);D=ge(he,y),he.forEach(C),L=S(Ie),Z=_(Ie,"P",{class:!0});var Oe=h(Z);ce=ge(Oe,W),Oe.forEach(C),Ie.forEach(C),pe=S(me),V=_(me,"DIV",{class:!0});var Re=h(V);N=_(Re,"A",{href:!0,target:!0,rel:!0});var Ge=h(N);B=_(Ge,"IMG",{class:!0,src:!0,alt:!0}),Ge.forEach(C),Re.forEach(C),me.forEach(C),ze.forEach(C),x=S(b),O=_(b,"DIV",{class:!0});var ve=h(O);H=_(ve,"DIV",{class:!0});var Ze=h(H);se(p.$$.fragment,Ze),Ze.forEach(C),Y=S(ve),R=_(ve,"DIV",{class:!0});var We=h(R);E.l(We),We.forEach(C),G=S(ve),M=_(ve,"DIV",{class:!0});var De=h(M);se(X.$$.fragment,De),De.forEach(C),ve.forEach(C),b.forEach(C),this.h()},h(){u(n,"class","cursor-pointer"),Ee(A.src,g=l[4].item.album.images[2].url)||u(A,"src",g),u(A,"class","h-[70px] w-[70px] rounded-sm"),u(A,"alt",""),u(a,"class",""),u(I,"class","text-gray-300 text-base font-bold line-clamp-1"),u(Z,"class","text-sm text-gray-400"),u(c,"class","my-1 w-[240px]"),u(B,"class","w-[18px] h-[18px] bg-gray-950"),Ee(B.src,le="assets/icons/Spotify_Icon_RGB_Green.png")||u(B,"src",le),u(B,"alt",""),u(N,"href",oe="https://open.spotify.com/track/"+l[4].item.uri.split(":")[2]),u(N,"target","_blank"),u(N,"rel","external noopener noreferrer"),u(V,"class","absolute right-[0.5rem] bottom-[0.5rem] rounded-full"),u(o,"class","flex gap-x-4 my-auto mx-auto"),u(s,"class","relative shadow mt-2 mb-1 bg-gray-900 rounded-md"),u(s,"id",Ce=l[4].item.id),u(H,"class","inline"),u(R,"class","inline"),u(M,"class","inline"),u(O,"class","bg-gray-900 px-2 py-[0.3rem] flex flex-1 space-x-6 justify-center rounded-md"),u(e,"class",re=`max-w-full md:max-w-[350px] w-full ${l[0]}`)},m(m,b){j(m,e,b),f(e,n),ie(t,n,null),f(e,i),f(e,s),f(s,o),f(o,a),f(a,A),f(o,r),f(o,c),f(c,I),f(I,D),f(c,L),f(c,Z),f(Z,ce),f(o,pe),f(o,V),f(V,N),f(N,B),f(e,x),f(e,O),f(O,H),ie(p,H,null),f(O,Y),f(O,R),ue[w].m(R,null),f(O,G),f(O,M),ie(X,M,null),T=!0,U||(z=[ee(n,"click",l[5]),ee(H,"click",l[6]),ee(R,"click",l[7]),ee(M,"click",l[8])],U=!0)},p(m,[b]){(!T||b&16&&!Ee(A.src,g=m[4].item.album.images[2].url))&&u(A,"src",g),(!T||b&16)&&y!==(y=m[4].item.name+"")&&Pe(D,y),(!T||b&16)&&W!==(W=m[4].item.artists[0].name+"")&&Pe(ce,W),(!T||b&16&&oe!==(oe="https://open.spotify.com/track/"+m[4].item.uri.split(":")[2]))&&u(N,"href",oe),(!T||b&16&&Ce!==(Ce=m[4].item.id))&&u(s,"id",Ce);let Ae=w;w=F(m),w!==Ae&&(je(),k(ue[Ae],1,1,()=>{ue[Ae]=null}),Te(),E=ue[w],E||(E=ue[w]=Ve[w](m),E.c()),v(E,1),E.m(R,null)),(!T||b&1&&re!==(re=`max-w-full md:max-w-[350px] w-full ${m[0]}`))&&u(e,"class",re)},i(m){T||(v(t.$$.fragment,m),v(p.$$.fragment,m),v(E),v(X.$$.fragment,m),T=!0)},o(m){k(t.$$.fragment,m),k(p.$$.fragment,m),k(E),k(X.$$.fragment,m),T=!1},d(m){m&&C(e),ne(t),ne(p),ue[w].d(),ne(X),U=!1,It(z)}}}function zs(l,e,n){let t,{class:i=""}=e,{player:s}=e,{state:o}=e,{wrapper:a}=e;console.log("player::",s),console.log("state::",o);const A=()=>a.logout(),g=()=>{s.previousTrack()},r=()=>s.togglePlay(),c=()=>{s.nextTrack()};return l.$$set=I=>{"class"in I&&n(0,i=I.class),"player"in I&&n(1,s=I.player),"state"in I&&n(2,o=I.state),"wrapper"in I&&n(3,a=I.wrapper)},l.$$.update=()=>{l.$$.dirty&4&&n(4,t={item:o.track_window.current_track})},[i,s,o,a,t,A,g,r,c]}class Ls extends be{constructor(e){super(),ye(this,e,zs,Ns,_e,{class:0,player:1,state:2,wrapper:3})}}function Os(l){let e,n,t,i,s,o;return{c(){e=d("div"),n=d("div"),t=d("img"),this.h()},l(a){e=_(a,"DIV",{slot:!0});var A=h(e);n=_(A,"DIV",{class:!0});var g=h(n);t=_(g,"IMG",{class:!0,src:!0,alt:!0}),g.forEach(C),A.forEach(C),this.h()},h(){u(t,"class","w-[24px] h-[24px] bg-gray-950 rounded-full"),Ee(t.src,i="/assets/icons/Spotify_Icon_RGB_Green.png")||u(t,"src",i),u(t,"alt",""),u(n,"class","p-2 bg-gray-800 rounded-md cursor-pointer"),u(e,"slot","login")},m(a,A){j(a,e,A),f(e,n),f(n,t),s||(o=ee(n,"click",l[5]),s=!0)},p:Se,d(a){a&&C(e),s=!1,o()}}}function Gs(l){let e,n,t;return{c(){e=d("div"),n=d("p"),t=ae("loading"),this.h()},l(i){e=_(i,"DIV",{slot:!0});var s=h(e);n=_(s,"P",{class:!0});var o=h(n);t=ge(o,"loading"),o.forEach(C),s.forEach(C),this.h()},h(){u(n,"class","text-white"),u(e,"slot","loading")},m(i,s){j(i,e,s),f(e,n),f(n,t)},p:Se,d(i){i&&C(e)}}}function Zs(l){let e;return{c(){e=d("div"),this.h()},l(n){e=_(n,"DIV",{slot:!0}),h(e).forEach(C),this.h()},h(){u(e,"slot","error")},m(n,t){j(n,e,t)},p:Se,d(n){n&&C(e)}}}function Ws(l){let e,n,t,i,s,o;return{c(){e=d("div"),n=d("div"),t=d("img"),this.h()},l(a){e=_(a,"DIV",{slot:!0});var A=h(e);n=_(A,"DIV",{});var g=h(n);t=_(g,"IMG",{class:!0,src:!0,alt:!0}),g.forEach(C),A.forEach(C),this.h()},h(){u(t,"class","w-[24px] h-[24px] bg-gray-950"),Ee(t.src,i="assets/icons/Spotify_Icon_RGB_Green.png")||u(t,"src",i),u(t,"alt",""),u(e,"slot","waiting")},m(a,A){j(a,e,A),f(e,n),f(n,t),s||(o=ee(n,"click",l[4]),s=!0)},p:Se,d(a){a&&C(e),s=!1,o()}}}function Ys(l){let e,n;return e=new Ls({props:{class:"animate-pop-in",slot:"player",wrapper:l[0],player:l[9],state:l[8]}}),{c(){te(e.$$.fragment)},l(t){se(e.$$.fragment,t)},m(t,i){ie(e,t,i),n=!0},p(t,i){const s={};i&1&&(s.wrapper=t[0]),i&512&&(s.player=t[9]),i&256&&(s.state=t[8]),e.$set(s)},i(t){n||(v(e.$$.fragment,t),n=!0)},o(t){k(e.$$.fragment,t),n=!1},d(t){ne(e,t)}}}function Ms(l){let e,n,t,i,s;const o=l[3].default,a=K(o,l,l[7],null);let A={client_id:l[1],name:"Mohan's Blog",volume:.5,redirect_uri:"http://localhost:5173/",$$slots:{player:[Ys,({state:g,player:r})=>({8:g,9:r}),({state:g,player:r})=>(g?256:0)|(r?512:0)],waiting:[Ws],error:[Zs],loading:[Gs],login:[Os]},$$scope:{ctx:l}};return i=new os({props:A}),l[6](i),{c(){e=d("html"),a&&a.c(),n=P(),t=d("div"),te(i.$$.fragment),this.h()},l(g){e=_(g,"HTML",{lang:!0,class:!0});var r=h(e);a&&a.l(r),r.forEach(C),n=S(g),t=_(g,"DIV",{class:!0});var c=h(t);se(i.$$.fragment,c),c.forEach(C),this.h()},h(){u(e,"lang","en"),u(e,"class","dark scroll-smooth selection:bg-gray-800 dark:antialiased bg-gray-950"),u(t,"class","absolute bottom-12 left-10")},m(g,r){j(g,e,r),a&&a.m(e,null),j(g,n,r),j(g,t,r),ie(i,t,null),s=!0},p(g,[r]){a&&a.p&&(!s||r&128)&&$(a,o,g,g[7],s?q(o,g[7],r,null):Q(g[7]),null);const c={};r&897&&(c.$$scope={dirty:r,ctx:g}),i.$set(c)},i(g){s||(v(a,g),v(i.$$.fragment,g),s=!0)},o(g){k(a,g),k(i.$$.fragment,g),s=!1},d(g){g&&C(e),a&&a.d(g),g&&C(n),g&&C(t),l[6](null),ne(i)}}}function Us(l,e,n){let{$$slots:t={},$$scope:i}=e,{data:s}=e;const{clientId:o}=s.server;let a;const A=()=>a.selectDevice(),g=()=>a.login();function r(c){mt[c?"unshift":"push"](()=>{a=c,n(0,a)})}return l.$$set=c=>{"data"in c&&n(2,s=c.data),"$$scope"in c&&n(7,i=c.$$scope)},[a,o,s,t,A,g,r,i]}class Fs extends be{constructor(e){super(),ye(this,e,Us,Ms,_e,{data:2})}}export{Fs as component,Xs as universal};
